
<!doctype html>
<html>
    <head>
      <title>Kova Bar Chart</title>
      <link rel="stylesheet" href="style.css">
      <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
      <script src="functions.js"></script>
    </head>
    <body>

      <h2>Bar Chart</h2>
      <main>
        <!--This is where the bar chart will be-->
        <div id="bar-container">
          <div class="bar"><p class="bar-label bar-label-top">100</p></div>
          <div class="bar"><p class="bar-label bar-label-middle">70</p></div>
          <div class="bar"><p class="bar-label bar-label-bottom">20</p></div>
          <div class="bar"><p class="bar-label">90</p></div>
          <div class="bar"><p class="bar-label">90</p></div>
          <div class="bar"><p class="bar-label">45</p></div>
      </div>
      </main>
      <form style="margin-top: 20px">
        <!--This is where all the settings for the bar chart will be located-->
        <label>Number of graph elements (integer value between 2 and 20):</label>
        <input type="text" id="number-of-elements" value="3"><br>

        <label>Graph colour:</label>
        <select id="colour-picker">
          <option class="bar-colour" value="salmon">Red</option>
          <option class="bar-colour" value="mediumseagreen">Green</option>
          <option class="bar-colour" value="cornflowerblue">Blue</option>
          <option class="bar-colour" value="goldenrod">Yellow</option>
        </select>

      </form>
      <footer class="footer">
        Created by Eric (Valeriy) Kovalevskyy in February of 2023 for Lighthouse Labs Prep Module.
      </footer>

      <script type="text/javascript">

        let numOfElements = 3;
        let barChartData = ["33", "50", "100", "88", "69", "39"];

        const valuePositions = ["bar-label-bottom", "bar-label-middle", "bar-label-top"];

        let labelColour = "white";

        let barSettings = {
          labelPosition: valuePositions[2],
          barColour: "salmon",
          labelColour: "black",
          fontColour: "white",
          fontSize: 13,
          spacing: "10px",
          axisLabelX: "X Axis",
          axisLabelY: "Y Axis",
          scaleData: false, //Whether the data should be shown from 0, or from the lowest point
        }

        const barElement = document.getElementById("bar-container");

        function drawBarChart(data, options, element){

          let lowestDataNum = data[0];
          let highestDataNum = data[0];

          for(let i = 0; i < data.length; i++){ //go through data to determine range
            let entry = parseFloat(data[i]);
            if(isNaN(entry)){
              data[i] = "Invalid Data";
              lowestDataNum = 0;
              highestDataNum = 0;
            } else {
              if(entry < lowestDataNum){
                lowestDataNum = data[i];
              }
              if(entry > highestDataNum){
                highestDataNum = data[i];
              }
            }
          }

          let output = `<h3 id="y-axis-label">Label Text Here</h3>`;
          output += `<div id="data-scale"><hr><hr><hr></div>`;

          for(const entry of data){

            const dataPercentage = Math.round(entry / highestDataNum * 95);

            output += `<div class="bar" style="height: ${dataPercentage}%"><p class="bar-label ${options.labelPosition}">${entry}</p></div>`;
          }
          element.innerHTML = output;

          $(".bar").css("background-color", options.barColour);
          $(".bar").css("margin-left", options.spacing);
          $(".bar").css("margin-right", options.spacing);
          $(".bar-label").css("color", options.labelColour);
        }

        drawBarChart(barChartData, barSettings, barElement);



        $(".bar").click(function(){
          $(this).children().html(function(){
            return Math.round(Math.random() * 100);
          });
        });

        $("#number-of-elements").on("input", function(){
          let val = $("#number-of-elements").val();
          val = parseInt(val);

          if(!isNaN(val)){

            numOfElements = val;

          }
        });

      </script>
    </body>
</html>
